window.AImodel="gemini-1.5-flash";window.difficultyText="Základní úroveň";let l;const f=document.getElementById("difficultyDropdown");f.addEventListener("change",function(){l=f.value,l==1?(window.difficultyText="Základní úroveň",console.log("obtížnost: "+window.difficultyText)):l==2?(window.difficultyText="Středoškolská úroveň",console.log("obtížnost: "+window.difficultyText)):l==3?(window.difficultyText="Vysokoškolská úroveň",console.log("obtížnost: "+window.difficultyText)):l==4&&(window.difficultyText="Expertní úroveň",console.log("obtížnost: "+window.difficultyText))});let r=0,t=[];function h(){t=[],document.getElementById("question_number_text").innerHTML="Otázka 1",new DOMParser().parseFromString(window.ExamOutput,"text/html").body.textContent.trim().split(`

`).map(o=>o.trim()).forEach(o=>{const c=o.split(`
`).map(s=>s.trim()),i=c[0],d=[];let m=null;c.slice(1).forEach(s=>{/^![a-c]!/.test(s)?(m=s.match(/^!([a-c])!/)[1]+")",d.push(s.replace(/^![a-c]!/,"").trim())):d.push(s)}),i&&d.length>0&&m&&t.push({question:i,answers:d,correctAnswer:m})}),r===0&&g(),console.log(t)}function g(){try{const e=document.getElementById("output");e.innerHTML="";let{question:n,answers:u}=t[r];const a=document.createElement("p");a.textContent=n,e.appendChild(a),u.forEach(o=>{const c=document.createElement("div"),i=document.createElement("button");i.textContent=o,i.onclick=()=>y(o),c.appendChild(i),e.appendChild(c)})}catch(e){console.error(e),window.alert("Chyba v generaci testu! Zkuste to prosím znovu. Po odkliknutí zprávy bude stránka obnovena"),window.location.reload()}}let p=0,w=0;function y(e){const n=t[r];e.startsWith(n.correctAnswer)?p++:w++,r++,document.getElementById("question_number_text").innerHTML=`Otázka ${r+1}`,r<t.length?g():(document.getElementById("question_number_text").innerHTML="Test dokončen!",document.getElementById("output").innerHTML='<a style="color: #53ac9e">'+p+" / "+t.length+' Správně</a><br><a style="color: #cf7644">'+w+" / "+t.length+" Špatně",document.getElementById("output").innerHTML+="<br>Úspěšnost: "+(10-w)*10+"%")}window.ListExam=function(){console.log("Attempting to list exam"),document.getElementById("examListDiv").style.right="0.5rem";for(let e=0;e<t.length;e++)document.getElementById("examListQuestionsList").innerHTML+=e+1+". "+t[e].question+"<br>"+t[e].answers[0]+"<br>"+t[e].answers[1]+"<br>"+t[e].answers[2]+"<br> Správně: "+t[e].correctAnswer+"<br><br>"};window.closeExamList=function(){document.getElementById("examListDiv").style.right="-125.5rem"};window.shareQuestions=function(){b(),document.getElementById("examListQuestionsList").innerHTML=`
    <b>Kód pro studenty: </b><br>
    ${window.shareCode}<br>
    <button id="copyShareCodeButton" style="margin-top: 1rem; background-color: white"; margin-bottom: 2rem; onclick="document.getElementById('copyShareCodeButton').innerHTML = 'Kopírováno'">Kopírovat</button> 
    <br><br>
    `,document.getElementById("copyShareCodeButton").onclick=function(){navigator.clipboard.writeText(window.shareCode)}};const b=window.encode=function(){let e=JSON.stringify(t);console.log(e);let n=btoa(unescape(encodeURIComponent(e)));console.log("ENCODED ARRAY"),console.log(n),window.shareCode=n};export{h as g};
